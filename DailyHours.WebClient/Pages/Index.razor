@page "/"
@using System.Globalization
@inject WeatherForecastService ForecastService

<WeekView CalendarWeek="calendarWeek" ProjectTasks="ProjectTasks"></WeekView>

@code {
    int calendarWeek;
    ProjectTask[] ProjectTasks { get; set; }

    protected override void OnInitialized()
    {
        var calendar = DateTimeFormatInfo.CurrentInfo.Calendar;
        calendarWeek = calendar.GetWeekOfYear(DateTime.Now, CalendarWeekRule.FirstDay, DayOfWeek.Monday);
        var tasks = new List<ProjectTask>();
        tasks.AddRange(ForecastService.GetProjectTasks(DateTime.Now));
        tasks.AddRange(ForecastService.GetProjectTasks(DateTime.Now.AddDays(-1)));
        ProjectTasks = tasks.ToArray();
    }
}
